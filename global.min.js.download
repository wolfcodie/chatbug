function getStatusColorText(n){return{"#FFA500":"warning","#EFB469":"warning","#2196F3":"info","#7CCCE5":"info","#00FF00":"success","#2B7A55":"success","#FF0000":"danger","#E87C70":"danger","#264653":"success","#2a9d8f":"success","#e9c46a":"success","#f4a261":"success","#e76f51":"danger","#d62828":"danger","#023e8a":"info","#0077b6":"info","#0096c7":"info","#00b4d8":"info","#48cae4":"success","#a6c7ea":"info","#1565bb":"info","#89bbde":"info","#2d72a3":"info","#6899aa":"info","#3e5d68":"info","#a9dbd2":"success","#3d9081":"success","#8fcfb4":"success","#3e926e":"success","#88bbaa":"success","#54917c":"success","#bbdcad":"success","#66ad48":"success","#bbcab3":"success","#7b986b":"success","#f9f18c":"warning","#fcee3a":"warning","#dfe88d":"warning","#afbd2a":"warning","#f1ed8c":"warning","#dcd522":"warning","#f4f0b0":"warning","#e1d959":"warning","#cbac8f":"danger","#a4784f":"danger","#fbdddd":"danger","#ea7373":"danger","#f8b2bd":"danger","#ef576f":"danger","#b7c4cf":"info","#607b93":"info","#f9a485":"danger","#f57141":"danger","#efa695":"danger","#e46f54":"danger","#fdbd7d":"danger","#fe9731":"danger","#ceb3d6":"warning","#a266b4":"warning","#babd42":"danger","#8c8e36":"danger","#282a3a":"danger","#7279b9":"info","#f24c4c":"danger","#e75151":"danger","#fa7070":"danger","#ea3939":"danger","#7d9d9c":"info","#425656":"info","#2a3990":"info","#a1aadc":"info","#3b185f":"danger","#a978db":"warning","#c060a1":"danger","#873a6e":"danger","#5f9df7":"info","#375d95":"info","#dfbb9d":"danger","#ba7943":"danger","#18978f":"success","#63efe7":"info","#1363df":"info","#aac4ff":"info","#7858a6":"info","#bf9fee":"info","#1d5c63":"success","#60c5d0":"info","#774360":"danger","#d17fad":"danger","#68a7ad":"success","#1f7178":"success","#863a6f":"danger","#e952bc":"info","#51557e":"info","#7981d3":"info","#e4aec5":"info","#b73a70":"danger","#d9cb50":"warning","#716711":"success","#2C7955":"success"}[n]||"danger"}function loguser(){$.get(GData.LogUser)}function ProfilImage(n,t){return GData.ProfilImageUrl.replace("codeuserid",n).replace("codefilename",t)}function fetchContentAndDisplay(n,t,i){t==undefined&&(t=$(n).attr("data-action"));$.get(t,function(t){$(n).html(t)}).fail(function(){$(n).html("Error fetching content.")});i&&i()}function DownloadFromBase64(n,t,i){var r=new FileManager;r.downloadFromBase64(n,t,i)}function ShowMessage(n,t){(n==null||n=="")&&(n=succesMessage);switch(t){case"error":toastr.error(n,"",{positionClass:"toast-bottom-right",duration:665677});break;case"success":toastr.success(n,"",{positionClass:"toast-bottom-right",duration:665677});break;default:toastr.info(n,"",{positionClass:"toast-bottom-right",duration:665677})}}function onSuccess(n){n.success==undefined?n.error!=undefined&&ShowMessage(n.message,"error"):n.success?ShowMessage(n.message,"success"):ShowMessage(n.message,"error");$("[number-type='true']").attr("type","number");$(".modal").modal("hide")}function BindDownloadFile(n,t){$(n).click(function(){var n=$(this).data("id"),i=$(this).data("name");window.location=t+"/?Id="+n+"&Name="+i})}function getCookie(n){const t=encodeURIComponent(n)+"=",i=document.cookie.split(";");for(let n=0;n<i.length;n++){let r=i[n];while(r.charAt(0)===" ")r=r.substring(1,r.length);if(r.indexOf(t)===0)return decodeURIComponent(r.substring(t.length,r.length))}return null}function onSuccessDelete(n){modalManager.onsuccess(n);n.success==!0&&sidebarManager.closeAllSidebars()}function OnCompleteDelete(){}function onSuccessView(n,t="form"){if(n.error!=undefined&&ShowMessage(n.message,"error"),n.error==undefined&&n.success==undefined){var i=$(n).find(t).html();$(".minthr-content-wrapper form , "+t).html(i);formInitialisation()}n.success!=undefined&&(n.success?($(".field-validation-error").html(""),ShowMessage(n.message,"success")):($.each(n.validationErrors,function(n,t){ShowMessage(t.message,"error")}),n.message!=null&&ShowMessage(n.message,"error")))}function onSuccessViewLayout(n){onSuccessView(n,form=".nv-profile-form form")}function InitToolTipe(){$('[data-toggle="tooltip"]').each(function(){$(this).tooltip({placement:$(this).data("placement")??"top",trigger:"hover",html:!0})});$('[data-toggle="tooltip"]').click(function(){$(this).tooltip("hide")})}function replaceSpanWithCulture(n){var t=$("<div>").html(n);return t.find("span[data-culture]").each(function(){var n=$(this).attr("data-culture");$(this).replaceWith("{{"+n+"}}")}),t.html()}function InitRangePicker(n){$(n).length&&$(n).length&&$(n).each(function(){var n=new Slider(this,{value:[$(this).data("slider-min"),$(this).data("slider-max")],range:!0,tooltip:"always"});$(this).data("range_min");$(this).data("range_max",n.getValue()[1]);$(this).change(function(){$(this).data("range_min",n.getValue()[0]);$(this).data("range_max",n.getValue()[1])})})}function applyFilterRange(n,t,i,r,u=""){filters["range_min"+u]=$(t).val();filters["range_max"+u]=$(i).val();$(n).data("dt_params",filters);$(n).DataTable().draw();var f=$(r).data("div");$(f).popover("hide")}function isNumberKey(n){var t=n.which?n.which:n.keyCode;return t==44||t==46?!0:t>31&&(t<48||t>57)?!1:!0}function Select2Events(n){$(n).on("select2:opening",function(){$(this).parent().find("label").addClass("active")});$(n).on("select2:closing",function(){$(this).parent().find("label").removeClass("active")});$(n).change(function(){$(this).val()!=""?$(this).parent().find("label").addClass("normal-active"):$(this).parent().find("label").removeClass("normal-active")})}function NavBarMobile(n){var r=$(n).find("option:selected"),i=r.data("tab"),t;i&&(t=$(i).attr("href"),t&&(window.location.href=t))}function BindTableSelect(n,t){$(n).on("select.dt deselect.dt",function(){var n=$("table").DataTable().rows(".selected").data("id").toArray();t!=null&&(n.length>0?$(t).show():$(t).hide())})}function initQuillEditor(){var n=new Quill("#minthr-wysiwyg-container",{modules:{formula:!0,syntax:!0,toolbar:"#minthr-wysiwyg-toolbar"},placeholder:"",theme:"snow"})}function loading(n,t){$(".Loading").length&&$(".Loading").remove();$(n).css("position","relative");$(n).append(` <div class="Loading">
        <div class="loading_page">
                <div class=" ml-1 one"></div>
                <div class=" ml-1 two"></div>
                <p class="mt-5 ot-tr-p-thick">`+t+`</p>
         </div>

    </div>`)}function Removeloading(n){$(n+" .Loading").length&&$(n+" .Loading").remove();$(n).css("position","initial")}function gridPagination(n,t=10,i=1,r=null){gridPaginationManager=new GridPagination(n,t,i,r);gridPaginationManager.fetchData();gridPaginationManager.bindEvents()}function SwitchToGrid(n,t,i,r=null){n==undefined&&(n=$(t).data("action"));gridPagination(t,10,1,r);$(t).show();i!=undefined&&($(i).hide(),$("#paginationPaged").html('10 <i class="fa fa-caret-down" aria-hidden="true"><\/i>'))}function ExportData(n,t,i){$(n).click(function(){var n=dataTableManager.selected,r;$("#selectAll").is(":checked")&&(n=[],n.push("all"));r=$(this).data("action");$.post(r,{ids:n,filter:filters}).done(function(n){DownloadFromBase64(n,t,i)})})}function InitialColorPicker(){Coloris({el:".coloris",swatches:["#264653","#2a9d8f","#e9c46a","#f4a261","#e76f51","#d62828","#023e8a","#0077b6","#0096c7","#00b4d8","#48cae4","#a6c7ea","#1565bb","#89bbde","#2d72a3","#6899aa","#3e5d68","#a9dbd2","#3d9081","#8fcfb4","#3e926e","#88bbaa","#54917c","#bbdcad","#66ad48","#bbcab3","#7b986b","#f9f18c","#fcee3a","#dfe88d","#afbd2a","#f1ed8c","#dcd522","#f4f0b0","#e1d959","#cbac8f","#a4784f","#fbdddd","#ea7373","#f8b2bd","#ef576f","#b7c4cf","#607b93","#f9a485","#f57141","#efa695","#e46f54","#fdbd7d","#fe9731","#ceb3d6","#a266b4","#babd42","#8c8e36","#282a3a","#7279b9","#f24c4c","#e75151","#fa7070","#ea3939","#7d9d9c","#425656","#2a3990","#a1aadc","#3b185f","#a978db","#c060a1","#873a6e","#5f9df7","#375d95","#dfbb9d","#ba7943","#18978f","#63efe7","#1363df","#aac4ff","#7858a6","#bf9fee","#1d5c63","#60c5d0","#774360","#d17fad","#68a7ad","#1f7178","#863a6f","#e952bc","#51557e","#7981d3","#e4aec5","#b73a70","#d9cb50","#716711"]})}function shouldTextBeBlack(n){return computeLuminence(n)>.179}function computeLuminence(n){var t=hexToRgb(n),r=["r","g","b"],u,i;for(u in r)i=r[u],t[i]=t[i]/255,t[i]=t[i]<=.03928?t[i]/12.92:Math.pow((t[i]+.055)/1.055,2.4);return.2126*t.r+.7152*t.g+.0722*t.b}function hexToRgb(n){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function BindAffectationContent(n){var t=$(n).data(),i=$(n).html().replaceAll("{title}",t.title).replaceAll("{description}",t.text).replaceAll("{selector}",n.replaceAll("#",""));$(n).html(i)}function GetDataOnScroll(n,t,i,r){$.get(t,{Lenght:5,CurrentList:i}).done(function(t){$(n).find("#ListScrole .loader").remove();var i=$(t).find("#ListScrole .newUser").html(),u=parseInt($(t).find(".inline-employs-counter .user-total").html());u<5&&r();$(n+" #ListScrole .newUser").append(i);$(n+" .inline-employs-counter .user-total").html($(t).find(".inline-employs-counter .user-total").html());$(n+"_checkAll").is(":checked")&&$(n+" #ListScrole input[type='checkbox']").each(function(){$(this).attr("checked","checked")})})}function BindScroll(n){function u(){i=!0}var r=$(n).data("url"),t=2,i=!1;$(n+" #ListScrole").scroll(function(){var f=$(this).scrollTop();f+$(this).innerHeight()>this.scrollHeight-.5&&i!=!0&&(GetDataOnScroll(n,r,t,u),t++)});$(n+"_checkAll").click(function(){$(this).is(":checked")?$(n+" #ListScrole input[type='checkbox']").each(function(){$(this).prop("checked",!0)}):$(n+" #ListScrole input[type='checkbox']").each(function(){$(this).prop("checked",!1)})})}function BindAffectationSearch(n){$(n+" .search-input input").on("keyup",function(){var t=$(n).data("url"),i=$(this).val();$.get(t,{SearchValue:i}).done(function(t){var i=$(t).find("#ListScrole").html(),r=parseInt($(t).find(".user-total").html());$(n+" #ListScrole").html(i);$(n+" .user-total").html(r)})})}function BindAffectationUser(){$(".assigned").on("click",function(n){var u,f;n.preventDefault();var t=[],i=$(this).data("selector"),e=$(this).data("assigned"),o=$("#id_form").val(),s=$("#id_form").val(),h=$("#title").val(),c=$("#AssignedUrl_form").val(),r=$(i+"_checkAll").is(":checked");r?(t=[],$(i+"  input[name=user_id]:not(:checked)").each(function(){t.push($(this).attr("id"))})):(t=[],$(i+"  input[name=user_id]:checked").each(function(){t.push($(this).attr("id"))}));u=$(i+" .search-input input").val();(t.length>0||r)&&(f={id:o,roleId:s,roleName:h,iDs:t,assigend:e,selectAll:r,searchValue:u},$.post(c,f).done(function(n){var t=n.success?"success":"error";ShowMessage(n.message,t);GetAffectationData("#Unassigned_div");GetAffectationData("#Assigned_div")}))})}function GetAffectationData(n){var t=$(n).data("url");$.get(t).done(function(t){$(n).html(t);BindAffectationContent(n);BindScroll(n);BindAffectationSearch(n)})}function GetFunctionCard(n){return`<div class="minthr-flex minthr-flex-items-center">
                    <img class="minthr-avatar minthr-avatar-m minthr-mr-2" src="${ProfilImage(n.id,n.image)}" alt="">
                    <div>
                        <h5>${n.fullName}</h5> 
                        <p class="text-s minthr-mb-0">${n.fonctionName??""}</p> 
                    </div>
                </div>`}function TimeLine(n,t){initTimeLine(n,t)}function initTimeLine(n,t,i=new Date){var r=document.getElementById("calendarConges");minthrCalendar=new FullCalendar.Calendar(r,{locale:culture,dir:"rtl",headerToolbar:{left:"",center:"",right:""},initialDate:i,editable:!1,droppable:!1,initialView:"resourceTimelineMonth",refetchResourcesOnNavigate:!0,slotLabelContent:n=>{if(n.view.type=="resourceTimelineMonth"){let t=moment(n.date).locale(culture).format("dddd").substring(0,3),i=moment(n.date).locale(culture).format("DD"),r=moment(n.date).locale(culture).format("MMM");return{html:`<div class="minthrCalendar-date">${i} <span>${t}</span></div>`}}},aspectRatio:1.5,resourceAreaWidth:"calc(var(--unit-minthr)* 217)",resourceOrder:"total",resourceAreaColumns:[{field:"title",headerContent:{html:`
                    <div class="minthr-flex minthr-flex-items-center">
                        <div class="minthr-icon-bg minthr-icon-bg-s minthr-icon-bg-secondary minthr-icon-circle minthr-mr-3">
                            <img class="minthr-icon-m " src="/newtheme/dist/icons/user.svg" alt="">
                        </div>
                        <h4>Effectif</h4>
                        <span class="minthr-ml-auto minthr-color-primary effectif"></span>
                    </div>
                `}}],displayEventTime:!1,eventSources:[{events:function(t,i){$.get(n,{Month:t.start.getMonth(),Year:t.start.getFullYear(),Filter:filter}).done(n=>{var t=n.map(n=>({resourceId:n.resourceId,backgroundColor:n.color,borderColor:n.textColor,textColor:n.textColor,isHoliday:n.isHoliday,fauTitle:n.fauTitle,demande:n.demande,start:n.start.split("T")[0],end:n.end.split("T")[0],description:n.description}));i(t)})}}],eventContent:function(n){var t=n.event.extendedProps.fauTitle?.split(" ")??null,i;return t&&(i=t[0]+'<span style="color: inherit;">'+t[1]+"<\/span>"),{html:i}},eventClassNames:function(n){let t=n.event._def.extendedProps.class;return[t]},eventClick:function(n){if(!n.event._def.extendedProps.isHoliday){var t=n.event._def.extendedProps.demande;openDataInSideBar("#conge_sideBar",_clickUrl+"/"+t)}},resources:function(n,i){$.get(t,{Month:n.start.getMonth(),Year:n.start.getFullYear(),SearchValue:searchValue,Filter:filter}).done(t=>{var r=t.map(n=>({id:n.id,title:GetFunctionCard(n.user)}));GetEffectif({Month:n.start.getMonth(),Year:n.start.getFullYear()});i(r)})},resourceLabelDidMount:function({el:n,fieldValue:t}){$(n).find(".fc-datagrid-cell-main").html(t);InitToolTipe()},resourceLabelContent:function(n){var t=n.resource.title;return{html:t}},datesSet:()=>{},moreLinkContent:function(n){return n.shortText},resourceLabelDidMount:function({el:n,fieldValue:t}){$(n).find(".fc-datagrid-cell-main").empty();$(n).find(".fc-datagrid-cell-main").html(t)},eventDrop:function(){},eventDidMount:function({el:n,view:i,event:t}){i.type=="resourceTimelineMonth"&&($(n).attr("tabindex","0"),$(n).attr("data-toggle","tooltip"),$(n).attr("title",t.extendedProps.description),$(n).find(".fc-event-main").css("color",t.textColor),$(n).find(".fc-event-main").addClass("minthr-text-align-center"),t.extendedProps.isHoliday&&($(n).find(".fc-event-main").html(""),$(n).find(".fc-event-main").html("<i class='fa fa-bookmark'><\/i>"),$(n).data("sidebar","sidebar-calendar"),$(n).data("sidebar-target",".event-requests-sidebar"),$(n).css("background-color","transparent"),$(n).css("border-color","transparent"),$(n).find(".fc-event-main").css("color","#69696991"),$(n).find(".fc-event-main").css("font-size","calc(var(--mintrh-unit) * 25)")));InitToolTipe()},loading:function(){}});minthrCalendar.render()}function gridCalendar(n,t){let i=!1;if(calendarGrid=document.getElementById(n),calendarGrid){var r=new FullCalendar.Calendar(calendarGrid,{locale:culture,headerToolbar:{start:"title prev,next",center:"",end:"dayGridMonth listYear"},buttonText:{today:"aujourd'hui",year:"Annuel",month:"Mensuel",week:"semaine",day:"jour",list:"liste"},initialView:"dayGridMonth",displayEventTime:!1,showNonCurrentDates:!1,fixedWeekCount:!1,aspectRatio:1.5,nextDayThreshold:"00:00:00",eventSources:[{events:function(n,r){var u={Month:n.start.getMonth(),Year:n.start.getFullYear(),IsProfile:!0,IsList:i},e=Math.abs(n.end-n.start),f=Math.ceil(e/864e5);(f==365||f==366)&&(u.IsFullYear=!0);$.get(t,u).done(n=>{let t=n.map(n=>({eventId:n.eventId,title:n.title,start:new Date(n.start),end:new Date(n.end),color:n.color,type:n.type,startText:n.startText,endText:n.endText,demande:n.demande,isHoliday:n.isHoliday}));r(t)})}}],eventClick:function(n){if(n.event._def.extendedProps.demande!=""){var t=n.event._def.extendedProps.demande;openDataInSideBar("#conge_sideBar",_clickUrl+"/"+t)}},dateClick:function(n){for(var r,i=calendarProfile.getEvents(),t=0;t<i.length;t++)if(moment(n.date).startOf("day").isBetween(moment(i[t].start).startOf("day"),moment(i[t].end).startOf("day"),null,"[]")){r=i[t]._def.extendedProps.demande;openDataInSideBar("#conge_sideBar",_clickUrl+"/"+r);break}},datesSet:function(n){i=n.view.type=="listYear";r.refetchEvents()}});r.render()}}function GetEffectif(n){$.get(EffectifUrl,n).done(function(n){$(".effectif").html(n.filterUsers+"/"+n.totalUsers)})}function readFile(n,t,i){if(n.files&&n.files[0]){var r=new FileReader;r.onload=function(r){var u=r.target.result,e=$(n).parent(),f=$(t),o=$(t);f.removeClass(i);$(t+" > img#Dropimg").attr("src",u)};r.readAsDataURL(n.files[0])}}function set_week_picker(n,t){let i=new Date(n.getFullYear(),n.getMonth(),n.getDate()-n.getDay()+1),r=new Date(n.getFullYear(),n.getMonth(),n.getDate()-n.getDay()+6);t.datepicker("update",i);t.val(i.getMonth()+1+"/"+i.getDate()+"/"+i.getFullYear()+" - "+(r.getMonth()+1)+"/"+r.getDate()+"/"+r.getFullYear())}function initWeekPicker(n){let t=$(n);t.datepicker({language:culture,format:format.toLowerCase()}).on("changeDate",function(n){set_week_picker(n.date,t)});$(".week-prev").on("click",function(){var n=new Date(start_date.getTime());n.setDate(n.getDate()-1);set_week_picker(n,t)});$(".week-next").on("click",function(){var n=new Date(end_date.getTime());n.setDate(n.getDate()+1);set_week_picker(n,t)})}function exportFile(n="#exportUsers",t="collaborateur"){$(n).click(function(){var n=$(this).data("action");$.post(n).done(function(n){DownloadFromBase64(n,t+".xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet")})})}function initFilter(){function n(){var n=$(".apply-filters-button"),t=$(".filter-active").length>0;n.prop("disabled",!t)}$("[data-filters]").on("click",function(){var t=$(this).data("filters");$(t).hasClass("minthr-hide")?$(t).removeClass("minthr-hide"):$(t).addClass("minthr-hide");n()});$(".minthr-daterangepicker").on("apply.daterangepicker",function(){$(this).addClass("active filter-active");n()});$(".dropdown input[type='checkbox']").on("click",function(){var t=$(this).closest(".dropdown"),i=t.find("input[type='checkbox']:checked").length>0;t.toggleClass("filter-active",i);n()});$(".range").change(function(){$(this).closest(".dropdown").addClass("filter-active");n()})}function getFilters(){return $(".filters div.dropdown.minthr-dropdown.filter-active button").each(function(){var n=$(this),o=n.attr("data-type"),r=$(this).attr("name"),u,f,e,t,i;switch(o){case"checkbox":u=n.parent().find("input:checked");filters[r]=u.map(function(){return $(this).val()}).get().join(",");break;case"date":n.parent().hasClass("minthr-daterangepicker")?(f=$(this).data("daterangepicker").startDate.format(format),e=$(this).data("daterangepicker").endDate.format(format),filters[$(this).attr("start-name")]=f,filters[$(this).attr("end-name")]=e,filters.DateFormat=format):n.parent().hasClass("minthr-datepicker")&&(filters[r]=n.find("button").val());break;case"slider":t=n.parent().find(".range").val().split(",")[0];i=n.parent().find(".range").val().split(",")[1];console.log(t);console.log(i);filters[$(this).attr("min-name")]=t;filters[$(this).attr("max-name")]=i;console.log(filters)}}),filters}function clearFilter(n,t){var f=n.find("button").attr("data-type"),i,r,u;switch(f){case"checkbox":n.find("input[type='checkbox']").length>0&&(n.find("input[type='checkbox']").prop("checked",!1),delete filters[n.find("button").attr("name")]);break;case"date":i=$(t).closest(".minthr-daterangepicker").find("input, button");i.data("daterangepicker").remove();i.daterangepicker({showDropdowns:!0,autoApply:!0,locale:locale_fr});$(t).closest(".minthr-daterangepicker").removeClass("active");delete filters[n.find("button").attr("start-name")];delete filters[n.find("button").attr("end-name")];break;case"slider":r=n.find(".range").data("slider-min");u=n.find(".range").data("slider-max");clearRangePicker(n,r,u);delete filters[n.find("button").attr("max-name")];delete filters[n.find("button").attr("min-name")]}return n.removeClass("filter-active"),filters}function bindClearFilter(){$("#clear-filter-button").on("click",()=>{});$('.filters [data-unapply="true"]').on("click",function(){$(".filters div.dropdown.minthr-dropdown.filter-active button").each(function(){var n=$(this).closest(".dropdown");clearFilter(n,this)})});$(".filter-close").on("click",function(){var n=$(this).closest(".dropdown");clearFilter(n,this)})}function clearRangePicker(n,t,i){n.find(".min-slider-handle").css("left","0%");n.find(".max-slider-handle").css("left","100%");n.find(".tooltip-inner").text(t+" : "+i);n.find("[role='presentation']").css("left","50%");n.find(".slider-selection, .slider-track-low").css({left:"0%",width:"100%"})}function formInitialisation(){$.validator.methods.min=function(n,t){return n=n.replace(",","."),this.optional(t)||!isNaN(n)&&!/^\s+$/.test(n)};$.validator.methods.number=function(n,t){return n=n.replace(",","."),this.optional(t)||!isNaN(n)&&!/^\s+$/.test(n)};$.validator.unobtrusive.parse("form");$("input[type-number='true']").on("keypress",function(n){var t=n.which?n.which:n.keyCode;return t==44&&culture=="fr"||t==46&&culture!="fr"?!0:t>31&&(t<48||t>57)?!1:!0});$("select.minthr-form-control:not([data-select2-id]):not(.ini-manual)").select2({placeholder:"",allowClear:!0,language:culture});$(".minthr-form-outline").each(function(){var n=$(this).find(".minthr-form-notch"),t;if(n.length==0){$(this).append('<div class="minthr-form-notch"><\/div>');n=$(this).find(".minthr-form-notch");n.append('<div class="minthr-form-notch-leading"><\/div>');n.append('<div class="minthr-form-notch-middle"><\/div>');n.append('<div class="minthr-form-notch-trailing"><\/div>');let r=$(this).find(".minthr-form-label").actual("width");r+=20;$(this).find(".minthr-form-notch-middle").css("min-width",r);let i=$(this).find(".minthr-form-control"),u=i.val();u!=""?i.addClass("active"):i.removeClass("active");t=$(this).find(".minthr-form-message").text();t.trim()!==""&&$(this).addClass("error")}});$(".minthr-form-outline .minthr-form-control").change(function(){let n=$(this).val();n!=""?$(this).addClass("active"):$(this).removeClass("active")});$(".minthr-form-outline select:not([data-select2-id]):not(.ini-manual)").select2({placeholder:"",allowClear:!0,language:culture});$(".minthr-select-badge:not([data-select2-id]):not(.ini-manual)").select2({placeholder:"",allowClear:!0,language:culture,minimumResultsForSearch:-1,dropdownCssClass:function(n){var r=$(n).attr("class"),t,i;return n[0].dataset.colorName&&(t=n[0].dataset.colorName,i=shouldTextBeBlack(t)?"black":"white",$(".select2-selection--single").css("background-color",t),$(".select2-selection__rendered").css("color",i),$(".select2-selection__arrow b").css("border-color",i)),r+"-dropdown"},templateResult:function(n){var t,i,r;if(!n.id)return n.text;if(t="",n.element){if(n.element.dataset.color)return t=n.element.dataset.color,$("<span><\/span>").text(n.text).addClass(t);if(n.element.dataset.colorName)return t=n.element.dataset.colorName,i=shouldTextBeBlack(t)?"black":"white",r=shouldTextBeBlack(t)?"white":"black",$("<span><\/span>").text(n.text).css("background-color",t).css("color",i).hover(function(){$(this).css("color",r)},function(){$(this).css("color",i)})}}});$(".minthr-select-badge").on("select2:select",function(n){var t=n.params.data,i;if(t.element.dataset.color){let n=t.element.dataset.color;$(".select2-container--focus").removeClass(["primary","success","danger","warning","info"]);$(".select2-container--focus").addClass(n)}else if(t.element.dataset.colorName){let n=t.element.dataset.colorName;i=shouldTextBeBlack(n)?"black":"white";$(".select2-selection--single").css("background-color",n);$(".select2-selection__rendered").css("color",i);$(".select2-selection__arrow b").css("border-color",i)}});$(".minthr-datepicker input").datepicker({language:culture=="ar"?"en":culture,format:format.toLowerCase()});$(".minthr-daterangepicker input,.minthr-daterangepicker button").daterangepicker({autoApply:!0,showDropdowns:!0})}function InitDatePicker(){$(".date-picker-component").daterangepicker({singleDatePicker:!0,showDropdowns:!0,autoApply:!0,language:culture});$(".minthr-daterangepicker input ,.minthr-daterangepicker button").daterangepicker({autoApply:!0,showDropdowns:!0});$(".minthr-monthdatepicker input").datepicker({language:culture,format:"mm-yyyy",viewMode:"months",minViewMode:"months"});$(".minthr-datepicker input").datepicker();$(".minthr-datepicker input ,.minthr-monthdatepicker input ").length&&$(".minthr-datepicker input ,.minthr-monthdatepicker input ").each(function(){var n=$(this).val();$(this).val()==""&&(n=new Date,$(this).val(n),$(this).datepicker("setDate",n))})}function parseDateWithCulture(n){const i={fr:/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/,en:/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/,es:/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/}[culture]||/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/,t=n.match(i);if(t){const n=parseInt(t[1],10),i=parseInt(t[2],10),r=parseInt(t[3],10);if(n>=1&&n<=31&&i>=1&&i<=12)try{const t=new Date(Date.UTC(r,i-1,n)),u=t.toLocaleDateString("en",{day:"numeric",month:"numeric",year:"numeric"});return new Date(u)}catch(u){return console.error(u),null}}return null}function getModal(n){modalManager.get(n)}function bindModalEvents(){$("[data-confirm ='true']").on("click",function(){var n=$(this).data();modalManager.confirm(n)});$("[data-delete ='true']").on("click",function(){var n=$(this).data();modalManager.remove(n)});$("[data-dismiss='modal']").on("click",function(){$(this).parents(".modal").modal("hide")})}function IniProgress(){function n(n){return n/100*360}$(".progress-circle").each(function(){var t=$(this).attr("data-value"),r=$(this).find(".progress-circle-left .progress-circle-bar"),i=$(this).find(".progress-circle-right .progress-circle-bar");t>0&&(t<=50?i.css("transform","rotate("+n(t)+"deg)"):(i.css("transform","rotate(180deg)"),r.css("transform","rotate("+n(t-50)+"deg)")))})}function searchbar_init(){$(".minthr-searchbar").each(function(){$(this).append('<span class="search-icon"><\/span>');$(this).append('<a class="search-clear"><\/a>')});$("body").on("click",".search-clear",function(){$(this).parent().find("input").val("");setTimeout(()=>{$(this).parent().removeClass("active"),$(this).parent().find("input[name='search']").val("")},50)});$(".minthr-searchbar input").on("focus keyup",function(){$(this).parent().addClass("active")});$(".minthr-searchbar input").on("blur",function(){let n=$(this).val();n==""&&$(this).parent().removeClass("active")});$("body").on("click",".minthr-searchbar-float",function(n){n.preventDefault();$(this).hasClass("active")||$(this).addClass("active")})}function openDataInSideBar(n,t,i,r="m"){sidebarManager.openWithData(n,t,i,undefined,r)}function openSideBar(n,t){sidebarManager.open(null,n,t);sidebarManager.closeEvent(n)}function onsuccess_sidebar(n){sidebarManager.onsuccess(n)}function IniTabsSelect(){$(".minthr-tabs-select").select2({minimumResultsForSearch:-1,templateSelection:optionFormat,templateResult:optionFormat});$(".minthr-tabs-select").on("select2:select",function(n){var i=n.params.data,r=i.element.dataset.tab,t;$(r).tab("show");t=window.document.createEvent("UIEvents");t.initUIEvent("resize",!0,!1,window,0);window.dispatchEvent(t)});$(".minthr-tabs-item").click(function(){var n=window.document.createEvent("UIEvents");n.initUIEvent("resize",!0,!1,window,0);window.dispatchEvent(n)})}async function highlightActiveLinks(n,t){var i=$(".minthr-sidemenu-nav a[href='"+t+"']");if(i.parents("li.minthr-sidemenu-nav-item").addClass("active"),i.parents("ul.minthr-sidemenu-subnav").length>0&&i.addClass("active"),$(".settings-navigation").append($("<a>").addClass(n==t?"minthr-color-dark h5":"minthr-color-gray").attr("href",t).text(i.text())),n!=t){const t=$("title").text().split("|")[0];$(".settings-navigation").append('<img class="minthr-icon-xs minthr-mx-2" src="/newtheme/dist/icons/arrow3.svg" alt="">');$(".settings-navigation").append($("<a>").addClass("minthr-color-dark h5").attr("href",n).text(t))}}function renderChatMessage(n){var i=n.user===$(".minthr-chat-messages").data("id"),t,r;return n.isgroup==!0&&(i=n.isgroup),console.log(i),console.log(n.isgroup),t={chatClass:i?"minthr-chat-received":"minthr-chat-sent",flexOrderImg:i?"minthr-flex-order0":"minthr-flex-order1",flexOrderDiv:i?"minthr-flex-order1":"minthr-flex-order0",bgColor:i?"minthr-bg-toxic-opacity":"minthr-bg-secondary",roundedClass:i?"minthr-border-rounded-right":"minthr-border-rounded-left",textAlign:i?"":"minthr-text-align-right"},r='<div class="'+t.chatClass+'"><div class="minthr-flex minthr-mb-6 minthr-mobile-flex-wrap"><img class="'+t.flexOrderImg+' minthr-avatar minthr-avatar-xs minthr-mr-4" data-toggle="tooltip" title="'+n.userFullName+'" src="/uploads/getprofileimage/'+n.user+'"  alt=""><div class="'+t.flexOrderDiv+'">',n.message&&(r+='<div class="'+t.bgColor+" minthr-px-4 minthr-py-3 "+t.roundedClass+' minthr-border-rounded-bottom">'+n.message+"<\/div>"),n.files&&n.files.length>0&&n.files.forEach(function(n){var i=n.mimeType.includes("image")?'<img class="minthr-border-rounded" src="/uploads/expensedoc?path='+n.path+' alt="">':'<img class="minthr-icon-xl minthr-mr-2" src="/newtheme/dist/icons/doc-file.svg" alt=""><div class="minthr-mr-6 minthr-pr-3"><h6>'+n.name+'<\/h6><\/div><img class="minthr-icon-s minthr-mr-1 minthr-icon-gray" src="/newtheme/dist/icons/download.svg" alt="">';r+='<div class="'+t.bgColor+" minthr-p-2 minthr-mt-2 "+t.roundedClass+' minthr-border-rounded-bottom" data-id="'+n.Id+'" data-name="'+n.name+'"><a class="minthr-flex minthr-flex-items-center minthr-text-decoration-none minthr-border-rounded">'+i+"<\/a><\/div>"}),r+='<div class="minthr-mt-1 '+t.textAlign+'"><span class="h6 text-s minthr-color-gray">'+n.date+"<\/span><\/div><\/div><\/div><\/div>"}function getTime(){var n=new Date,i=n.getHours(),t=n.getMinutes();return i+":"+(t<10?"0":"")+t}function notification(n,t){var i=$("#"+n+" .minthrh-chat-item-notification."+n).data("value");return i+t.length+1}function DownloadChatFile(){$(".DownLoadFile").click(function(){var n=$(this).data("id"),t=$(this).data("name"),i=Downloadfileurl+"/"+n+"?name="+t;n!=undefined&&(window.location=i)})}var filter,searchValue,minthrCalendar,searchTimeout;moment.defineLocale("ar",{longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},preparse:function(n){return n},postformat:function(n){return n}});$(function(){culture=window.value;moment.locale(culture);format=moment().creationData().locale._longDateFormat.L;$(".minthr-notifications-btn").click(function(n){n.preventDefault();$(this).parent().find(".minthr-notification-dropdown").toggleClass("active")});$(".minthr-box-slider").slick({dots:!1,infinite:!0,speed:300,slidesToShow:1,nextArrow:$(".minthr-box-slider-next"),prevArrow:$(".minthr-box-slider-prev"),rtl:GData.IsRtl});$(".minthr-type-conge").slick({dots:!1,infinite:!0,speed:300,slidesToShow:1,variableWidth:!0,nextArrow:$(".minthr-type-conge-next"),prevArrow:$(".minthr-type-conge-prev"),rtl:GData.IsRtl});$("*[tab-url]").on("click",function(n){n.preventDefault();fetchContentAndDisplay($(this).attr("href"),$(this).attr("tab-url"))});InitToolTipe()});window.intercomSettings={api_base:"https://api-iam.intercom.io",app_id:"avh6ijfq",name:GData.UserFullName,email:GData.UserEmail},function(){var n=window,r=n.Intercom,u,t,i;typeof r=="function"?(r("reattach_activator"),r("update",n.intercomSettings)):(u=document,t=function(){t.c(arguments)},t.q=[],t.c=function(n){t.q.push(n)},n.Intercom=t,i=function(){var n=u.createElement("script"),t;n.type="text/javascript";n.async=!0;n.src="https://widget.intercom.io/widget/avh6ijfq";t=u.getElementsByTagName("script")[0];t.parentNode.insertBefore(n,t)},document.readyState==="complete"?i():n.attachEvent?n.attachEvent("onload",i):n.addEventListener("load",i,!1))}();filter={};$(".minthr-monthdatepicker input").on("change",function(){const n=$(this).datepicker("getDate");minthrCalendar.gotoDate(n)});$(".minthr-searchbar-calendar input").on("keyup",function(){clearTimeout(searchTimeout);searchValue=$(this).val();searchTimeout=setTimeout(function(){minthrCalendar.refetchResources();minthrCalendar.refetchEvents()},500)});$(".minthr-monthdatepicker [data-action]").on("click",function(){var t=$(this).data("action"),n=$(".minthr-monthdatepicker input").datepicker("getDate");t==="next"?n.setMonth(n.getMonth()+1,1):t==="prev"&&n.setMonth(n.getMonth()-1,1);$(".minthr-monthdatepicker input").datepicker("setDate",n)});$('.calendar.filters [data-apply="true"]').on("click",function(){filter=getFilters();minthrCalendar.refetchResources();minthrCalendar.refetchEvents()});$(".calendar #clear-filter-button").on("click",()=>{searchValue="",minthrCalendar.refetchResources(),minthrCalendar.refetchEvents()});$('.calendar.filters [data-unapply="true"]').on("click",function(){$(".filters div.dropdown.minthr-dropdown.filter-active button").each(function(){var t=$(this).closest(".dropdown"),n;filter=clearFilter(t,this);n=$(".minthr-type-conge label").find("input:checked");filter.TypeConge=n.map(function(){return $(this).val()}).get().join(",");minthrCalendar.refetchResources();minthrCalendar.refetchEvents()})});$(".calendar .filter-close").on("click",function(){var n=$(this).closest(".dropdown");filter=clearFilter(n,this);minthrCalendar.refetchResources();minthrCalendar.refetchEvents()});$(".minthr-type-conge label").on("click",function(){$(this).find("input").is(":checked")?$(this).addClass("active"):$(this).removeClass("active");var n=$(".minthr-type-conge label").find("input:checked");filter.TypeConge=n.map(function(){return $(this).val()}).get().join(",");minthrCalendar.refetchResources();minthrCalendar.refetchEvents()});$(function(){$(".minthr-color-picker").minicolors();$(".minthr-color-picker").change(function(){var n=$(this).val();$(".icon-preview").css("background-color",n)})});class DTManager{constructor(n,t,i,r,u=false){this.selector=n;this.url=t;this.columns=i;this.options=Object.assign({},this.getDefaultOptions(),r);this.dynamicVisible=!0;this.table=null;this.selected=[];this.pageLength=10;this.currendPage=0;this.filters={};this.noAction=u;this.tableElement=$(this.selector)}init(){this.destroyDataTable();this.table=$(this.selector).DataTable(this.options);this.bindCustomEvents();this.bindPagination();this.bindActions();this.bindFilter();this.bindClearFilter();this.bindSelectEvent();InitToolTipe()}getDefaultOptions(){return{dom:"rtiplf",pagingType:"full_numbers",searching:!0,paging:!0,pageLength:10,info:!0,processing:!0,serverSide:!0,filter:!0,responsive:!1,select:{style:"multi",selector:"td:first-child"},language:{url:"/theme/plugins/datatables/languages/"+this.getDtLang(),paginate:{first:"�",previous:"�",next:"�",last:"�"}},ajax:{url:this.url,type:"GET",data:n=>{var t=this.filters;t&&$.extend(n,{searchColumns:t});this.options.dataSourceId!==""&&$.extend(n,{dataSourceId:this.options.dataSourceId})},datatype:"json"},rowCallback:(n,t)=>{($.inArray(t.id,this.selected)!==-1||$("#selectAll").is(":checked"))&&$(n).addClass("selected")},drawCallback:()=>{},columns:this.generateColumns(),columnDefs:[],stateSaveParams:function(n,t){t.search.search=""}}}destroyDataTable(){$.fn.DataTable.isDataTable(this.selector)&&(this.table=$(this.selector).DataTable(),this.table.destroy())}getDtLang(){var n="English";return window.value==="fr"?n="French":window.value==="ar"?n="Arabic":window.value==="es"&&(n="Spanish"),n+".json"}settings(){this.options=Object.assign({},this.getDefaultOptions(),this.options)}generateColumns(){var n=[{name:"id",autoWidth:!0,visible:!1,searchable:!1,data:"id"}];return $.each(this.columns,function(t,i){var r;typeof i!="string"?(i.type=="date"?r=function(n){return n!=null?moment(new Date(n)).format(moment.localeData().longDateFormat("L")):"--/--/----"}:i.type!=null&&i.type.indexOf("#")>=0&&(r=function(n,t,r,u){var f,e;if(n!=null&&n!=""){if(f=$(i.type).html().replaceAll("%7B","{").replaceAll("%7D","}"),f)return e=f.split(/[\{\}]/g).filter(function(n,t){return t%2==1}),$.each(e,function(t,i){f=f.replaceAll("{"+i+"}",n[i])}),f=f.replaceAll("[row]",u.row)}else return""}),n.push({data:i.data,name:i.name,autoWidth:!0,visible:!0,searchable:i.order??!0,orderable:i.order??!0,render:i.render??r,subTask:i.subTask??null})):n.push({data:i,name:i,autoWidth:!0,visible:!0,searchable:!0,render:i.render??null,subTask:i.subTask??null})}),this.generatedColumns=n,this.generatedColumns}renderColumns(){[].forEach(n=>{const t=this.table.row.add(n).draw().node();$(t).addClass("newly-added-row")})}bindPagination(){$(document).on("click",".pagination .page-link",n=>{n.preventDefault();const t=$(n.currentTarget).data("page");this.table.page(t).draw(!1)})}bindActions(){$(this.selector).on("click",".edit-button",n=>{const t=this.table.row($(n.currentTarget).closest("tr")).data()});$(this.selector).on("draw.dt",function(){bindModalEvents()})}bindCustomEvents(){var n=this;$(this.selector).on("customEvent",".custom-element",()=>{});$(".minthr-searchbar input[name='search']:not(.globalsearch)").on("keyup",function(){n.table.search($(this).val()).draw()});$(".minthr-searchbar .search-clear").on("click",function(){n.table.search($(this).val()).draw()})}bindFilter(){var n=this;$('.filters [data-apply="true"]').on("click",function(){n.filters=getFilters();n.table.draw()});initFilter()}ClearFilter(n,t,i){i.filters=clearFilter(n,t)}bindClearFilter(){var n=this;$("#clear-filter-button").on("click",()=>{this.table.search("").draw()});$('.filters [data-unapply="true"]').on("click",function(){$(".filters div.dropdown.minthr-dropdown.filter-active button").each(function(){var t=$(this).closest(".dropdown");n.ClearFilter(t,this,n)});n.table.draw()});$(".filter-close").on("click",function(){var t=$(this).closest(".dropdown");n.ClearFilter(t,this,n)})}bindSelectEvent(){let n=this;$(this.selector).on("select.dt deselect.dt",function(){let t=$(n.selector).DataTable().rows().data().toArray().map(n=>n.id),i=$(n.selector).DataTable().rows(".selected").data().toArray().map(n=>n.id);t.forEach(function(t){let r=i.indexOf(t);if(r>=0){let i=n.selected.indexOf(t);i===-1&&n.selected.push(t)}else r=n.selected.indexOf(t),r>=0&&n.selected.splice(r,1)})})}generateCellElement(n){const{taghtml:r,"class":u,text:f,click:e,id:o,attribute:i}=n,t=$(`<${r}></${r}>`);if(u&&t.addClass(u),f&&t.text(f),e)t.on("click",e);if(o&&t.attr("id",o),i)for(const n in i)if(Object.hasOwnProperty.call(i,n)){const r=i[n];t.attr(n,r)}return t}generateProfileAvatarBox(n){n=n||{};const u=n.id||"",i=n.url.replaceAll("{id}",u)||"javascript:void(0)",f=n.imagePath||"/uploads/getprofileimage/00f89d3d-8aad-48cc-999e-add46adfbc52/undefined",t=generateCellElement({taghtml:"div","class":"inline-user-box"}),e=generateCellElement({taghtml:"a",href:i||"javascript:void(0)",onclick:function(n){GetSideBar(n,i||"/employee",!0)}});t.append(e);const r=generateCellElement({taghtml:"div","class":"profile-avatar-box"});t.append(r);const o=generateCellElement({taghtml:"img",src:f||"/uploads/getprofileimage",alt:"","class":"profile-avatar border-0"});return r.append(o),t}}let dataTableManager;$(function(){});class FileManager{constructor(){this.dataTransfer=new DataTransfer;this.cmt=0}isFileAllowed(n){const t=n.split(".").pop().toLowerCase();return["jpg","png","gif","jpeg","doc","docx","xls","xlsx","rar","pdf","zip",].includes(t)}bindChangeFile(n){const t=this;$(n).change(function(){const n=$(this).prop("files"),i=$(".minthr-sidebar-content-files.new");for(let i=0;i<n.length;i++){const r=n[i].name;if(!t.isFileAllowed(r)){alert("File not allowed: "+r);return}}for(let r=0;r<n.length;r++){const u=`
            <div class="col-sm-12">
                <a id="file-${t.cmt}" class="minthr-flex minthr-flex-items-center minthr-bg-light-gray minthr-text-decoration-none minthr-p-2 minthr-border-rounded minthr-mb-3">
                    <img class="minthr-icon-xl minthr-mr-2" src="/newtheme/dist/icons/doc-file.svg" alt="">
                    <div class="minthr-mr-6 minthr-pr-3 minthr-text-truncate">
                                    <h6 title="${n[r].name}">${n[r].name}</h6>
                        <div class="text-s">${(n[r].size/1048576).toFixed(2)} mb</div>
                    </div>
                    <button type="button" class="minthr-p-0 minthr-border-none minthr-bg-transparent minthr-ml-auto minthr-mr-2 file-cancel" data-cmpt="${t.cmt}" data-name="${n[r].name}">
                        <img src="/newtheme/dist/icons/delete.svg" alt="">
                    </button>
                </a>
            </div>
        `;i.append(u);i.removeAttr("hidden");t.cmt++}const r=t.dataTransfer;for(const t of n)r.items.add(t);this.files=t.dataTransfer.files;t.bindCancelFile(".file-cancel")})}bindCancelFile(n){const t=this;$(n).click(function(){const i=$(this).data("cmpt"),r=$(this).data("name");$(`#file-${i}`).remove();for(let n=0;n<t.dataTransfer.items.length;n++)if(r===t.dataTransfer.items[n].getAsFile().name){t.dataTransfer.items.remove(n);break}$(n).prop("files",t.dataTransfer.files)})}bindRemoveFile(n){$(n).click(function(){const t=$(this).data("url"),n=$(this).data("id");$.post(t,{Id:n},function(t){const r=t.message,i=t.success;ShowMessage(r,i?"success":"error");i&&$("#"+n).remove()})})}bindDownloadFile(n,t){$(n).click(function(){const n=$(this).data("id"),i=$(this).data("name");window.location=`${t}/?Id=${n}&Name=${i}`})}renderPDF(n,t,i,r,u=".details-secend-sidebar-title",f=true){if(t)PDFObject.embed(t,n,{height:"100%",page:"1",pdfOpenParams:{toolbar:"1"}}),$(u).html(i),$(`${r} #downloadfile`).attr("hidden",f),openSideBar(r,!1)}renderImage(n,t,i,r,u=".details-secend-sidebar-title"){const f=$("<img>").attr("src",t).addClass("preview");$(n).empty().append(f);$(`${r} #downloadfile`).attr("hidden",!0);$(u).html(i);$(r).addClass("open")}renderFileByDataInSideBar(n){var t=n.fileDownloadName,i;if(t.indexOf(".pdf")>=0){const r=n.fileContents,u=n.contentType;$("#file-sidebar").length==0&&(i=$("<div><\/div>").attr("id","file-sidebar").addClass("minthr-sidebar minthr-sidebar-m minthr-flex minthr-flex-column"),$("body").append(i));const f=$("<div><\/div>").addClass("minthr-flex minthr-flex-items-center minthr-pb-2 minthr-mb-3 minthr-border-b minthr-border-w2").append($("<h3><\/h3>").addClass("minthr-text-truncate").text(t)).append($("<button><\/button>").addClass("minthr-sidebar-close").attr("type","button").html("<img src='/newtheme/dist/icons/close.svg'>"));$("#file-sidebar").html(f);$("#file-sidebar").append($("<div><\/div>").addClass("content h-100"));const e=this.downloadFromBase64(r,t,u,!0);PDFObject.embed(e,"#file-sidebar .content",{height:"100%",page:"1",pdfOpenParams:{toolbar:"1"}});openSideBar("#file-sidebar",!1)}else this.downloadFromBase64(n.fileContents,n.fileDownloadName,n.contentType)}renderFileInSideBar(n,t,i="file-sidebar"){if(t.indexOf(".pdf")>=0){if($("#"+i).length==0){var r=$("<div><\/div>").attr("id",i).addClass("minthr-sidebar minthr-sidebar-m minthr-flex minthr-flex-column");$("body").append(r)}const u=$("<div><\/div>").addClass("minthr-flex minthr-flex-items-center minthr-pb-2 minthr-mb-3 minthr-border-b minthr-border-w2").append($("<h3><\/h3>").text(t)).append($("<button><\/button>").addClass("minthr-sidebar-close").attr("type","button").html("<img src='/newtheme/dist/icons/close.svg'>"));$("#"+i).html(u);$("#"+i).append($("<div><\/div>").addClass("content h-100"));PDFObject.embed(n,"#"+i+" .content",{height:"100%",page:"1",pdfOpenParams:{toolbar:"1"}});openSideBar("#"+i,!1)}else this.downloadFromBase64(data.fileContents,data.fileDownloadName,data.contentType)}renderImgInSideBar(n,t,i="file-sidebar"){if(t.indexOf(".png")>=0||t.indexOf(".jpeg")>=0||t.indexOf(".jpg")>=0){if($("#"+i).length==0){var r=$("<div><\/div>").attr("id",i).addClass("minthr-sidebar minthr-sidebar-m minthr-flex minthr-flex-column");$("body").append(r)}const u=$("<div><\/div>").addClass("minthr-flex minthr-flex-items-center minthr-pb-2 minthr-mb-3 minthr-border-b minthr-border-w2").append($("<h3><\/h3>").text(t)).append($("<button><\/button>").addClass("minthr-sidebar-close").attr("type","button").html("<img src='/newtheme/dist/icons/close.svg'>"));$("#"+i).html(u);$("#"+i).append($("<div><\/div>").addClass("content h-100").append($("<img>").attr("src",n).addClass("minthr-h-90")));openSideBar("#"+i,!1)}else this.downloadFromBase64(data.fileContents,data.fileDownloadName,data.contentType)}bindDownloadFromBase64(n,t){const i=this;$(n).click(function(){var n=$(this).data("id"),r=$(this).data("name"),u=t+"/"+n+"/"+r;n==undefined&&r==undefined&&(u=t);$.get(u).done(function(n){i.downloadFromBase64(n.data.fileContents,n.data.fileDownloadName,n.data.contentType)})})}downloadFromBase64(n,t,i,r=false){for(var e=atob(n),o=new Array(e.length),f=0;f<e.length;f++)o[f]=e.charCodeAt(f);var h=new Uint8Array(o),s=new Blob([h],{type:i}),u=document.createElement("a");if(r)return window.URL.createObjectURL(s);u.href=window.URL.createObjectURL(s);u.download=t;u.style.display="none";document.body.appendChild(u);u.click();document.body.removeChild(u)}bindDragAndDrop(n){$(document).on("dragover",n,function(t){t.preventDefault();t.stopPropagation();$(this).addClass("hovered");$(n).addClass("hover")});$(document).on("dragleave",n,function(t){t.preventDefault();t.stopPropagation();$(this).removeClass("hovered");$(n).removeClass("hover")})}checkFileExists(n,t){const i=new Image;i.src=n;i.complete?t(!0):(i.onload=()=>{t(!0)},i.onerror=()=>{t(!1)})}}let filters={};const locale_fr={format:"DD/MM/YYYY",applyLabel:"Valider",cancelLabel:"Annuler",fromLabel:"De",toLabel:"à",customRangeLabel:"Custom",daysOfWeek:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"],monthNames:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],firstDay:1};$.validator.setDefaults({errorElement:"span",errorClass:"field-validation-error",highlight:function(n){$(n).parents(".minthr-form-outline").addClass("error")},unhighlight:function(n){$(n).parents(".minthr-form-outline").removeClass("error")}});$(function(){formInitialisation();InitDatePicker()});$(function(){$(".minthr-icon-picker").click(function(){$(this).toggleClass("open")});$(".minthr-icon-picker-item").click(function(n){n.preventDefault();var i=$(this).attr("data-icon"),t=$dir_path+"/dist/icons/"+i;$(".minthr-icon-picker-selected img").attr("src",t);$(".icon-preview img").attr("src",t)})});class ModalManager{constructor(n="#modal-Client"){this.selector=n}get(n){const t=this;$.get(n).done(function(n){n.error!=undefined?ShowMessage(n.message,"error"):t.show(n)})}show(n,t){this.update(n);$(this.selector).modal("show");t!=undefined&&t()}update(n){$(this.selector).find(".modal-content").html(n);formInitialisation()}Hide(){$(".modal").modal("hide");$("body").css("overflow-y","auto");$(".back-shadow").length!=0&&$(".back-shadow").remove();$(".modal-backdrop").length!=0&&$(".modal-backdrop").remove();$("table").length!=0&&$("table").each(function(){if($.fn.DataTable.isDataTable(this))$(this).DataTable().ajax.reload();else return})}onsuccess(n){n.error?(ShowMessage(n.message,"error"),this.Hide()):n.success==undefined?this.update(n):(ShowMessage(n.message,n.success?"success":"error"),this.Hide())}confirm(n){n.title&&$("#ModalConfirm h3").text(n.title);n.text&&$("#ModalConfirm .text").text(n.text);n.action&&$("#ModalConfirm form").attr("action",n.action);$("#ModalConfirm form").attr("data-ajax-method",n.method||"POST");$("#ModalConfirm").modal("show")}remove(n){n.title&&$("#ModalDelete h3").text(n.title);n.text&&$("#ModalDelete .text").text(n.text);n.action&&$("#ModalDelete form").attr("action",n.action);$("#ModalDelete form").attr("data-ajax-method",n.method||"POST");$("#ModalDelete").modal("show")}}let modalManager;$(function(){modalManager=new ModalManager;bindModalEvents()});class GridPagination{constructor(n,t,i,r=null){this.selector=n;this.length=t;this.currentPage=i;this.url=$(n).data("action");this.parametrs={CurrentPage:this.currentPage,lenght:this.length,SearchValue:"",Filter:r}}fetchData(n=false){let t=this;this.parametrs.CurrentPage=this.currentPage;this.parametrs.lenght=this.length;$.get(this.url,this.parametrs).done(function(i){if($(t.selector).html(i),!n){let n=$("#PageCount").val();$("#pages_element").html(n);$("#Length").html(t.length)}let u=$("#PageCount").val(),r=$(t.selector).find("#totalObjects").val();r=parseInt(r);$("#page_element").html(t.currentPage);$("#total_element").html(r);$("#pages_element").html(u);$("#elements-pagination").attr("hidden",r<=10)})}bindEvents(){let n=this;$(".search").keyup(function(t){t.preventDefault();setTimeout(()=>{n.parametrs.SearchValue=$(this).val(),n.fetchData()},80)});$(".grid-paggin-select").on("change",function(t){t.preventDefault();n.length=$(this).val();n.fetchData()});$(".grid-previous").on("click",function(t){(t.preventDefault(),n.currentPage=parseInt($("#page_element").text())-1,n.length=parseInt($("#Table_length select").text()),n.currentPage!=0)&&(n.fetchData(!0),$("#page_element").html(n.currentPage))});$(".grid-next").on("click",function(t){t.preventDefault();n.currentPage=parseInt($("#page_element").text())+1;n.length=parseInt($("#Table_length select").text());let i=parseInt($("#pages_element").html());n.currentPage>i||i==0||(n.fetchData(!0),$("#page_element").html(n.currentPage))})}}let gridPaginationManager;$(function(){IniProgress()});$(function(){$(".minthr-rating").each(function(){let n=$(this).attr("data-rating");n=n*20;$(this).find(".minthr-rating-active").css("width",n+"%")})});$(function(){searchbar_init();var n=$(".minthr-searchbar.minthr-nav-search input"),t=null;n.on("focus keyup",function(i){i.preventDefault();var r=$(".minthr-searchbar.minthr-nav-search .minthr-search-result");clearTimeout(t);t=setTimeout(function(){$.post(GData.searchUrl,{searchTerm:n.val()}).done(function(n){r.replaceWith(n)})},$(n).val()!==""?500:0)});$("body").on("click",".minthr-searchbar-float",function(n){n.preventDefault();$(this).hasClass("active")||$(this).addClass("active")})});class SidebarManager{constructor(){this.openedSidebars=[];this.pageWidth=$(window).width();$(".minthr-sidebar-close").click(n=>this.closeSidebar(n))}openWithData(n,t,i,r,u="m"){const f=this;$.get(t).done(function(t){t.error!=undefined?ShowMessage(t.message,"error"):(f.update(t,n,i,u),f.open(null,n,i,u));r!=undefined&&r()})}open(n,t,i=true,r="m"){this.closeEvent(t);let u;if(t?u=$(t):(t=$(n.target).attr("data-sidebar"),u=$(t)),u.length==0&&(u=$("<div><\/div>").attr("id",t).addClass("minthr-sidebar minthr-flex minthr-flex-column minthr-sidebar-"+r),$("body").append(u)),i)this.closeAllSidebars();else if(u&&u.length>0){const n=this.openedSidebars.findIndex(n=>n==="#"+u[0].id);if(n!==-1)return}u.addClass("active");$("body").addClass("minthr-sidebar-opened");let f=0;this.pageWidth>480&&this.openedSidebars.forEach(n=>{let t=document.querySelector(n);t||(t=$("<div><\/div>").attr("id",n).addClass("minthr-sidebar minthr-flex minthr-flex-column minthr-sidebar-"+r),$("body").append(t));f+=t.offsetWidth});u.css("transform","translateX(-"+f+"px)");this.openedSidebars.push(t);let e=$("html").attr("dir");e?u.css("transform","translateX("+f+"px)"):u.css("transform","translateX(-"+f+"px)");u.css("z-index",100-this.openedSidebars.length);$("#bg-overlay").length==0&&$("body").append('<div id="bg-overlay"><\/div>')}update(n,t=".minthr-sidebar.active",i=false,r="m"){let u=$(t);u.length==0&&(u=$("<div><\/div>").attr("id",t.substring(1)).addClass("minthr-sidebar minthr-flex minthr-flex-column minthr-sidebar-"+r),$("body").append(u));u.html(n);formInitialisation();this.closeEvent(t);bindModalEvents();InitDatePicker()}closeSidebar(n,t){let r;r=t?$(t):$(n.target).closest(".minthr-sidebar");const i=this.openedSidebars.findIndex(n=>n==="#"+r[0].id);if(i!=-1){for(let n=i;n<this.openedSidebars.length;n++){const i=this.openedSidebars[n],t=$(i);t.removeClass("active");t.css("transform",GData.IsRtl?"translateX(-100%)":"translateX(100%)")}this.openedSidebars.splice(i,this.openedSidebars.length);this.openedSidebars.length===0&&$("body").removeClass("minthr-sidebar-opened")}}closeEvent(n){const t=this;$(n+" .minthr-sidebar-close").click(function(i){i.preventDefault();t.closeSidebar(i,n)})}closeAllSidebars(){const n=$(".minthr-sidebar");n.removeClass("active");n.css("transform",GData.IsRtl?"translateX(-100%)":"translateX(100%)");this.openedSidebars=[];$("body").removeClass("minthr-sidebar-opened")}onsuccess(n){n.error?(ShowMessage(n.message,"error"),dataTableManager!=null&&dataTableManager.init(),this.closeSidebar()):n.success==undefined?this.update(n):(ShowMessage(n.message,n.success?"success":"error"),this.closeAllSidebars(),dataTableManager&&dataTableManager.init())}}let sidebarManager;$(function(){sidebarManager=new SidebarManager;let n="",t="";$("[data-sidebar]").click(function(){n=$(this).attr("data-sidebar");t=$(this).attr("data-url");sidebarManager.openWithData(n,t,!1)})});$(function(){$(".item-click  > a").click(function(n){n.preventDefault();$(this).parent().toggleClass("active")});$(".minthr-sidemenu-open").click(function(n){n.preventDefault();$(".minthr-sidemenu").addClass("open")});$(".minthr-sidemenu-close").click(function(n){n.preventDefault();$(".minthr-sidemenu").removeClass("open")})});$(function(){var n=$(window).width();n<=480&&$(".minthr-mobile-table").each(function(){var t=$(this),n=[],i=t.find("thead tr");i.find("th").each(function(){var t=$(this);n.push(t)});t.find("tbody tr").each(function(){var t=$(this);t.find("td").each(function(t){var r=$(this),i;n[t].hasClass("minthr-table-label-ignore")||(i=$('<span class="minthr-table-label">').html(n[t].html()+" :"),r.prepend(i))})})})});let optionFormat=function(n){var t=n.element?.dataset?.content,i;return t?(t=t.replace(/\\'/g,'"'),i=$('<div class="minthr-flex minthr-flex-items-center minthr-tabs-option">'),i.html(t),i):n.text};$(function(){IniTabsSelect()});$(function(){$(".minthr-timeline-btn").click(function(n){n.preventDefault();$(this).closest(".minthr-timeline-item").toggleClass("open")})});$(function(){if(document.getElementById("minthr-wysiwyg-container"))var n=new Quill("#minthr-wysiwyg-container",{modules:{formula:!0,syntax:!0,toolbar:"#minthr-wysiwyg-toolbar"},placeholder:"",theme:"snow"})});$(function(){var n,t;$(".minthr-header-user").click(function(n){n.preventDefault();$(".minthr-header-user-container").toggleClass("open")});n=$(window).width();n<=480&&(t=$(".minthr-nav-options").detach(),$(".footer-mobile").append(t),$(".minthr-nav-btn-search").click(function(n){n.preventDefault();$(".minthr-nav-search-container").toggle()}),$(".minthr-nav-search-close").click(function(n){n.preventDefault();$(".minthr-nav-search-container").hide()}))});$(function(){$(".minthr-menu-open").click(function(n){n.preventDefault();$(".minthr-sidenav").toggleClass("active")});$(".minthr-menu-close").click(function(n){n.preventDefault();$(".minthr-sidenav").removeClass("active")});$(".minthr-sidenav-item").click(function(n){$(this).children("div").length>0&&n.preventDefault();$(".minthr-sidenav-item").each(function(){$(this).removeClass("open")});$(this).toggleClass("open")});$(".minthr-sidenav-submenu li a").click(function(){window.location.href=$(this).attr("href")})});$(function(){$(".minthr-chat-user-item").click(function(){$(".minthr-chat-main").addClass("active")});$(".minthr-chat-main-close").click(function(){$(".minthr-chat-main").removeClass("active")})});let token=getCookie("jwttoken"),client=window.location.hostname.split(".")[0],domainextension=window.location.hostname.split(".")[2],apidomain=`https://api.minthr.${domainextension}/chathub`,connection=(new signalR.HubConnectionBuilder).withUrl(apidomain,{accessTokenFactory:()=>token}).withAutomaticReconnect().build();$(".chat-send").prop("disabled",!0);Notification.permission!=="denied"&&Notification.requestPermission().then(()=>{});connection.on("ReceiveMessage",function(n,t,i){var u,o,r,s,f,e;$(".minthr-chat-messages").length>0&&(u=t,i.length>1?u=i[i.length-1].name.substring(0,30)+"....":t.length>30&&(u=t.substring(0,30)+"...."),$("#"+n+" .w-50 .lastmessage").text(u),$("#"+n+" .date").contents().first().replaceWith(getTime()),n===$(".minthr-chat-messages").data("id").toString()?(o=renderChatMessage(i),$(".minthr-chat-messages").append(o),$(".minthr-chat-messages").scrollTop($(".minthr-chat-messages")[0].scrollHeight),$.post(seenUrl,{userid:n,isgroup:i.isgroup}).done(function(){})):(r=$(".minthrh-chat-item-notification."+n).data("value")+1,isNaN(r)&&(r=1),$("#"+n+" .date .minthrh-chat-item-notification").remove(),s=$("<span>",{"class":"minthrh-chat-item-notification "+n,text:" ( "+r+" )","data-value":r}),$("#"+n+" .date").append(s),f=parseFloat($(".total-Messages").data("value"))+1,$(".total-Messages").text(f),$(".total-Messages").data("value",f)),$("#ListScrole").find(".minthr-chat-user-item#"+n).length>0?(e=$(".minthr-chat-user-item#"+n),i.isgroup=="True"?e.prependTo("#ListScrole"):e.detach().insertAfter(".groups-end"),$(".group").first().removeClass("groups-end minthr-border-b"),$(".group").last().addClass("groups-end minthr-border-b")):$.get(chatlist,{userid:n}).done(function(n){$("#ListScrole").prepend(n)}));$(".minthr-nav-btn-message button").addClass("active");$(".chat-messages").show()});connection.on("UserStatus",function(n,t,i){t?$(".currentuser[data-id='"+n+"'] .lastactivity").text(onlineText):t||(i==null?$(".currentuser[data-id='"+n+"'] .lastactivity").text(""):$(".currentuser[data-id='"+n+"'] .lastactivity").text(i))});connection.start().then(function(){$(".chat-send").prop("disabled",!1)}).catch(function(n){alert(n)});$("#ListScrole").on("click",".minthr-chat-user-item",function(){var n=$(this).data("id");connection.invoke("connectedUser",n).catch(function(n){return console.log(n.toString())})});